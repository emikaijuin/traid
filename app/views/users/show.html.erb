<div class="columns" id="user-show-container">
  <div class="column">
    
    <div class="level" id="user-show-header">
      <div class="level-left">
        <div><h1><%= @user.username %></h1></div>
      </div>
      
      <div class="level-right" id="user-show-header-traid-level">
        <div><%= @user.rating %>  <i class="fas fa-star">   </i></div>
        <div>
          <%#= form_for(:traid, url: new_traid_path, :method => :get) do |f| %>
            <%#= hidden_field_tag(:traid_user_id, params[:id]) %> 
            <%#= f.submit "Traid with #{@user.username}!", :class => "button is-primary is-outlined" %>
          <%# end %>
          <button class="button is-primary is-outlined" id="toggle-traid-form"> Traid with <%=@user.username%>!</button>
        </div>
        <div>
          <span><%= @user.traids.count %><%= @user.traids.count == 1 ? " TRAID" : " TRAIDS" %> </span>
        </div> 
      </div>
      
    </div>
    
    <hr>
    
    <div class="columns is-one-third">
      <div class="column">
        
        <div class="columns" id="user-show-info-container">
          <div class="column">
            <div>
              <span>Community: <%= @user.city %></span>
            </div>
            <br>
            <div>
              <h4>Is offering:</h4>
              <% if !@user.is_seeking.empty? %>
                <ul>
                  <% @user.is_seeking.each do |i| %>
                    <li><%= i %></li>
                  <% end %>
                </ul>
              <% else %>
                <div>User is not currently seeking anything.</div>
              <% end %>
            </div>
            <br>
            <div>
              <h4>Is seeking:</h4>
              <% if !@user.is_offering.empty? %>
              <ul>
                <% @user.is_offering.each do |i| %>
                  <li><%= i %></li>
                <% end %>
              </ul>
              <% else %>
                <div>User is not currently offering anything.</div>
              <% end %>
            </div>

          </div>
        </div>
        
        
        <div class="columns" id="user-show-reviews-container">
          <div class="column">
            <h3>User Reviews</h3>
            <%= flash[:review] %>
            <% if logged_in? %>
              <% if @user.is_reviewable_by?(current_user)  && current_user != User.find(params[:id]) %>
                <p>
                  Have you reviewed your Traid with <%=@user.username%> yet?
                  <a class="toggle-review-form"><i class="fas fa-plus"></i> Review</a>
                </p>
              
              <div id="hidden-review-form">
                <span class="toggle-review-form"><i class="fas fa-times" id="close-review-form" ></i></span>
                <%= form_for [@user, @review] do |f| %>
                  <%= render "reviews/form", f: f, user: @user %>
                <% end %>
              </div>
              <% end %>
              
              <% if !@user.reviews.empty? %>
                <% @user.reviews.each do |review| %>
                  <%= render "users/reviews", review: review %>
                <% end %>
              <% else %>
                <div>
                  This user hasn't been reviewed yet.
                </div>
              <% end %>
            <% end %>
          </div>  
          
        </div>
      </div>
    
      <div class="column is-one-third" id="user-show-additional-info">
        A BUNCH OF PICTURES AND THINGS WILL GO HERE NOT SURE YETS
      </div>        
    
      <div class="column is-one-third" id="user-show-traid-form">
        <%= render "traids/form", traid: @traid %>
        <span id="close-traid-form"><i class="fas fa-times"></i></span>
      </div>        
  
   </div>
  </div>
</div>
